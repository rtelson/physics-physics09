<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Pierre Marie Curie Physics 9 â€“ A-380 Take-Off Roll</title>
  <style>
    body {
      margin: 0;
      padding: 20px;
      font-family: Arial, sans-serif;
      background: #f5f5f5;
      color: #333;
    }
    .header {
      display: flex;
      flex-direction: column;
      align-items: center;
      margin-bottom: 24px;
    }
    .header img {
      width: 120px;
      height: 120px;
      margin-bottom: 12px;
    }
    .header h1 {
      margin: 0;
      font-size: 1.6em;
    }
    .scenario {
      text-align: center;
      margin-bottom: 24px;
    }
    .scenario h2 {
      margin: 0 0 12px;
      font-size: 1.4em;
    }
    .scenario p {
      margin: 0 0 16px;
      max-width: 600px;
      line-height: 1.4;
    }
    .scenario input {
      width: 100px;
      padding: 4px;
      font-size: 0.9em;
    }
    .scenario button {
      padding: 6px 12px;
      font-size: 0.9em;
      margin-left: 8px;
    }
    #takeoffResult {
      text-align: center;
      font-weight: bold;
      margin-bottom: 16px;
    }
    #runway {
      display: block;
      margin: 0 auto;
      border: 1px solid #999;
      background: #eee;
      border-radius: 8px;
    }
  </style>
</head>
<body>

  <!-- Logo & Title -->
  <div class="header">
    <img src="logo.svg" alt="School Logo" />
    <h1>Pierre Marie Curie Physics 9 â€“ Solving Kinematic Problems</h1>
  </div>

  <!-- Scenario & Input -->
  <div class="scenario">
    <h2>A-380 Take-Off Roll</h2>
    <p>
      An Airbus A-380 is lined up on a <strong>5 000 m</strong> runway and is about to take off.<br>
      Take-off speed: <strong>280 km/h</strong><br>
      Acceleration: <strong>1 m/sÂ²</strong><br>
      Calculate how long it takes to reach take-off speed.
    </p>
    <label for="studentTime">Your answer (seconds):</label>
    <input type="number" id="studentTime" step="0.1" />
    <button onclick="simulateTakeoff()">Submit</button>
  </div>

  <!-- Outcome -->
  <div id="takeoffResult"></div>

  <!-- Hidden plane sprite -->
  <img id="planeSprite" src="a380-side.png" alt="A-380 Side View" style="display:none" />

  <!-- Runway canvas -->
  <canvas id="runway" width="1200" height="250"></canvas>

  <script>
    const canvas       = document.getElementById('runway');
    const ctx          = canvas.getContext('2d');
    const runwayY      = canvas.height / 2;
    const planeImg     = document.getElementById('planeSprite');

    // Physics parameters
    const vKmh         = 280;
    const vMs          = vKmh * 1000 / 3600;    // â‰ˆ77.78 m/s
    const a            = 1;                    // m/sÂ²
    const correctTime  = vMs / a;              // â‰ˆ77.78 s
    const runwayLength = 5000;                 // m

    let studentTime = 0;
    let startTime   = null;

    function drawRunway() {
      ctx.fillStyle = '#444';
      ctx.fillRect(0, runwayY - 12, canvas.width, 24);

      ctx.strokeStyle = '#fff';
      ctx.lineWidth = 4;
      ctx.setLineDash([40, 30]);
      ctx.beginPath();
      ctx.moveTo(0, runwayY);
      ctx.lineTo(canvas.width, runwayY);
      ctx.stroke();
      ctx.setLineDash([]);
    }

    function drawPlane(x, lifting) {
      const w = planeImg.width;
      const h = planeImg.height;
      ctx.save();
      const cx = x + w / 2;
      const cy = runwayY - h / 2;
      ctx.translate(cx, cy);
      if (lifting) ctx.rotate(-Math.PI / 18);  // ~10Â° nose-up
      ctx.translate(-cx, -cy);
      ctx.drawImage(planeImg, x, runwayY - h);
      ctx.restore();
    }

    function drawHUD(t, dist) {
      ctx.fillStyle = '#000';
      ctx.font = '16px Arial';
      ctx.fillText(`t: ${t.toFixed(1)} s`, 10, 20);
      ctx.fillText(`v: ${(a * t).toFixed(1)} m/s`, 10, 40);
      ctx.fillText(`d: ${dist.toFixed(1)} m`, 10, 60);
    }

    function showOutcome(t, dist) {
      const div = document.getElementById('takeoffResult');
      if (t < correctTime * 0.9) {
        div.textContent = 'Too short! The plane stalls and crashes ðŸ”¥';
      } else if (t > correctTime * 1.1 || dist > runwayLength) {
        div.textContent = 'Too long! The plane overruns the runway ðŸ’¥';
      } else {
        div.textContent = 'Perfect! The plane lifts off smoothly ðŸŽ‰';
      }
    }

    function animate(now) {
      if (!startTime) startTime = now;
      const t    = (now - startTime) / 1000;      // seconds
      const dist = 0.5 * a * t * t;               // meters
      let x      = (dist / runwayLength) * (canvas.width - planeImg.width);
      x = Math.max(0, Math.min(x, canvas.width - planeImg.width));

      ctx.clearRect(0, 0, canvas.width, canvas.height);
      drawRunway();
      drawPlane(x, a * t >= vMs);
      drawHUD(t, dist);

      if (t < studentTime && dist < runwayLength * 1.2) {
        requestAnimationFrame(animate);
      } else {
        showOutcome(t, dist);
      }
    }

    function simulateTakeoff() {
      const input = parseFloat(document.getElementById('studentTime').value);
      if (isNaN(input) || input <= 0) {
        alert('Please enter a valid positive number of seconds.');
        return;
      }
      studentTime = input;
      startTime   = null;
      document.getElementById('takeoffResult').textContent = '';
      // ensure the image is loaded before animating
      if (planeImg.complete) {
        requestAnimationFrame(animate);
      } else {
        planeImg.onload = () => requestAnimationFrame(animate);
      }
    }
  </script>
</body>
</html>
